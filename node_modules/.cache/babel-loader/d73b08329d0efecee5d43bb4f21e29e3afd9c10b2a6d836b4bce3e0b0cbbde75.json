{"ast":null,"code":"var _jsxFileName = \"/Users/abhishekyadav/Desktop/WEBDEV/MERN/the project/FRONTEND/src/components/Post.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport Displaypost from './Displayposts';\nimport { postContext } from '../context/postContext';\nimport Masonry from \"masonry-layout\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Posts() {\n  _s();\n  // Add console logs to track execution\n  console.log(\"Posts component rendering\"); // Debug line\n\n  const {\n    posts,\n    getpost\n  } = useContext(postContext);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(true); // Start with loading true\n  const [error, setError] = useState(null);\n\n  // Debug context\n  console.log(\"Posts context:\", {\n    posts,\n    getpost\n  }); // Debug line\n\n  useEffect(() => {\n    console.log(\"Initial useEffect running\"); // Debug line\n    const fetchInitialPosts = async () => {\n      try {\n        console.log(\"Starting to fetch posts\"); // Debug line\n        setLoading(true);\n        setError(null);\n        await getpost(1, true);\n        console.log(\"Posts fetched successfully\"); // Debug line\n      } catch (err) {\n        console.error(\"Failed to fetch posts:\", err); // Debug line\n        setError(\"Failed to load posts. Please try again later.\");\n      } finally {\n        setLoading(false);\n        console.log(\"Loading complete\"); // Debug line\n      }\n    };\n    fetchInitialPosts();\n  }, []);\n\n  // Debug render states\n  console.log(\"Render state:\", {\n    loading,\n    error,\n    posts\n  }); // Debug line\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger my-4\",\n      children: [error, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        className: \"btn btn-sm btn-primary ms-2\",\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center my-5 py-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border text-primary\",\n        style: {\n          width: '3rem',\n          height: '3rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n  if (!posts || posts.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info my-4\",\n      children: \"No posts found. Be the first to share your ideas!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row masonry-grid\",\n      style: {\n        marginLeft: \"-10px\",\n        width: \"80vw\"\n      },\n      children: posts.map(post => /*#__PURE__*/_jsxDEV(Displaypost, {\n        post: post\n      }, post._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: loadMore,\n        disabled: loading,\n        className: \"btn btn-primary btn-lg px-4\",\n        children: loading ? 'Loading...' : 'Load More Posts'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Posts, \"EVbu9xvVlGLIdYWw/GjcTkk8zZc=\");\n_c = Posts;\nvar _c;\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["React","useContext","useEffect","useState","Displaypost","postContext","Masonry","jsxDEV","_jsxDEV","Fragment","_Fragment","Posts","_s","console","log","posts","getpost","page","setPage","loading","setLoading","error","setError","fetchInitialPosts","err","className","children","onClick","window","location","reload","fileName","_jsxFileName","lineNumber","columnNumber","style","width","height","length","marginLeft","map","post","_id","loadMore","disabled","_c","$RefreshReg$"],"sources":["/Users/abhishekyadav/Desktop/WEBDEV/MERN/the project/FRONTEND/src/components/Post.js"],"sourcesContent":["\n\nimport React, { useContext, useEffect, useState } from 'react'\nimport Displaypost from './Displayposts'\nimport { postContext } from '../context/postContext'\nimport Masonry from \"masonry-layout\"\n\nexport default function Posts() {\n  // Add console logs to track execution\n  console.log(\"Posts component rendering\") // Debug line\n  \n  const { posts, getpost } = useContext(postContext)\n  const [page, setPage] = useState(1)\n  const [loading, setLoading] = useState(true) // Start with loading true\n  const [error, setError] = useState(null)\n\n  // Debug context\n  console.log(\"Posts context:\", { posts, getpost }) // Debug line\n\n  useEffect(() => {   \n    console.log(\"Initial useEffect running\") // Debug line\n    const fetchInitialPosts = async () => {\n      try {\n        console.log(\"Starting to fetch posts\") // Debug line\n        setLoading(true)\n        setError(null)\n        await getpost(1, true)\n        console.log(\"Posts fetched successfully\") // Debug line\n      } catch (err) {\n        console.error(\"Failed to fetch posts:\", err) // Debug line\n        setError(\"Failed to load posts. Please try again later.\")\n      } finally {\n        setLoading(false)\n        console.log(\"Loading complete\") // Debug line\n      }\n    }\n    fetchInitialPosts()\n  }, [])\n\n  // Debug render states\n  console.log(\"Render state:\", { loading, error, posts }) // Debug line\n\n  if (error) {\n    return (\n      <div className=\"alert alert-danger my-4\">\n        {error}\n        <button \n          onClick={() => window.location.reload()} \n          className=\"btn btn-sm btn-primary ms-2\"\n        >\n          Retry\n        </button>\n      </div>\n    )\n  }\n\n  if (loading) {\n    return (\n      <div className=\"d-flex justify-content-center my-5 py-5\">\n        <div className=\"spinner-border text-primary\" style={{ width: '3rem', height: '3rem' }}>\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    )\n  }\n\n  if (!posts || posts.length === 0) {\n    return (\n      <div className=\"alert alert-info my-4\">\n        No posts found. Be the first to share your ideas!\n      </div>\n    )\n  }\n\n  return (\n    <>\n      <div className='row masonry-grid' style={{ marginLeft: \"-10px\", width: \"80vw\" }}>\n        {posts.map((post) => (\n          <Displaypost key={post._id} post={post} />\n        ))}\n      </div>\n      \n      <div className=\"text-center mt-4\">\n        <button \n          onClick={loadMore} \n          disabled={loading} \n          className=\"btn btn-primary btn-lg px-4\"\n        >\n          {loading ? 'Loading...' : 'Load More Posts'}\n        </button>\n      </div>\n    </>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}